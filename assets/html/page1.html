<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
    <link href="./assets/css/carousel.css" rel="stylesheet" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap");

      body {
        font-family: "Black Han Sans", sans-serif;
      }
    </style>
    <script>
      const serviceKey = "066c4bf5fb8745fcc2b066ec145bb938";
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript">
      let url = "https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app/v1/regcodes";
      let regcode = "*00000000";
      // 전국 특별/광역시, 도
      // https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app/v1/regcodes?regcode_pattern=*00000000
      $.ajax({
        url: url,
        type: "GET",
        data: {
          regcode_pattern: regcode,
        },
        dataType: "json",
        success: function (response) {
          let code = ``;
          $.each(response.regcodes, function (i, regcode) {
            code += `
            <option value="${regcode.code}">${regcode.name}</option>
            `;
          });
          $("#sido").empty().append('<option value="">시도선택</option>').append(code);
        },
        error: function (xhr, status, msg) {
          console.log("상태값 : " + status + " Http에러메시지 : " + msg);
        },
      });

      $(document).on("change", "#sido", function () {
        regcode = $(this).val().substr(0, 2) + "*00000";
        console.log(regcode);
        $.ajax({
          url: url,
          type: "GET",
          data: {
            regcode_pattern: regcode,
            is_ignore_zero: true,
          },
          dataType: "json",
          success: function (response) {
            let code = ``;
            $.each(response.regcodes, function (i, regcode) {
              code += `
            <option value="${regcode.code}">${regcode.name.split(" ")[1]}</option>
            `;
            });
            $("#gugun").empty().append('<option value="">구군선택</option>').append(code);
          },
          error: function (xhr, status, msg) {
            console.log("상태값 : " + status + " Http에러메시지 : " + msg);
          },
        });
      });

      $(document).on("change", "#gugun", function () {
        regcode = $(this).val().substr(0, 4) + "*";
        console.log(regcode);
        $.ajax({
          url: url,
          type: "GET",
          data: {
            regcode_pattern: regcode,
            is_ignore_zero: true,
          },
          dataType: "json",
          success: function (response) {
            let code = ``;
            $.each(response.regcodes, function (i, regcode) {
              code += `
            <option value="${regcode.code}">${regcode.name.split(" ")[2]}</option>
            `;
            });
            $("#dong").empty().append('<option value="">동선택</option>').append(code);
          },
          error: function (xhr, status, msg) {
            console.log("상태값 : " + status + " Http에러메시지 : " + msg);
          },
        });
      });

      //   function addOption(selid, data) {
      //     // console.log(data.regcodes);
      //     let code = ``;
      //     $.each(data.regcodes, function (i, regcode) {
      //       code += `
      //         <option value="${regcode.code}">${regcode.name}</option>
      //         `;
      //     });
      //     $(selid).empty().append(code);
      //   }
    </script>
  </head>
  <body>
    <!--navigation bar start-->
    <nav class="navbar navbar-light navbar-expand-lg bg-light shadow">
      <div class="container">
        <a class="navbar-brand" href="../../index.html">
          <img src="../img/navbar/logo.png" width="100" alt="" />
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
          <!-- Links -->
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <img src="../img/navbar/map.png" width="30" alt="" style="display: inline" />
              <a class="nav-link" href="../html/page1.html" style="display: inline">지역별 여행지</a>
            </li>
            <li class="nav-item">
              <img src="../img/navbar/calendar.png" width="30" alt="" style="display: inline" />
              <a class="nav-link" href="../html/page2.html" style="display: inline">나의 여행 계획</a>
            </li>
            <li class="nav-item">
              <img src="../img/navbar/camera.png" width="30" alt="" style="display: inline" />
              <a class="nav-link" href="../html/page3.html" style="display: inline">핫플 자랑하기</a>
            </li>
            <li class="nav-item">
              <img src="../img/navbar/bubble-chat.png" width="30" alt="" style="display: inline" />
              <a class="nav-link" href="../html/page4.html" style="display: inline">여행정보공유</a>
            </li>
          </ul>

          <!--로그인 전-->
          <ul class="navbar-nav me-2" style="display: flex">
            <li class="nav-item">
              <a class="nav-link" href="#">로그인</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">회원가입</a>
            </li>
          </ul>

          <!--로그인 후-->
          <ul class="navbar-nav" style="display: none">
            <li class="nav-item">
              <a class="nav-link" href="#">로그아웃</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">마이페이지</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!--navigation bar end-->

    <!--지역별 여행지 start-->
    <div>
      <h2 class="d-flex justify-content-center mt-3">지역 선택</h2>
      <!--시 군 구 start-->
      <div>
        <div class="dropdown d-flex justify-content-center mt-3 mb-3">
          <select name="sido" id="sido" class="dropdown-toggle ms-3 me-3"></select>
          <select name="gugun" id="gugun" class="dropdown-toggle ms-3 me-3">
            <option value="" class="dropdown-menu">구군선택</option>
          </select>
          <select name="dong" id="dong" class="dropdown-toggle ms-3 me-3">
            <option value="">동선택</option>
          </select>
        </div>
      </div>

      <!--시 군 구 end-->

      <!--kakao map start-->
      <div class="container">
        <!-- kakao map start -->
        <div id="map" class="mt-3" style="width: 100%; height: 700px"></div>
        <!-- kakao map end -->
      </div>

      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
      <script
        type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b9279a4bc661b8f08442322e95e06d92&libraries=services,clusterer,drawing"></script>
      <script>
        // 카카오지도
        var mapContainer = document.getElementById("map"), // 지도를 표시할 div
          mapOption = {
            center: new kakao.maps.LatLng(37.500613, 127.036431), // 지도의 중심좌표
            level: 5, // 지도의 확대 레벨
          };
        // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
        var map = new kakao.maps.Map(mapContainer, mapOption);
      </script>
      <!--kakao map end-->

      <!--추천 start-->
      <div></div>
      <!--추천 end-->
    </div>
    <!--지역별 여행지 end-->

    <!--footer start-->
    <nav class="navbar navbar-expand-sm bg-light navbar-light">
      <div class="container">
        <a class="navbar-brand" href="#"><img src="../img/footer/ssafy_logo.png" alt="" /></a>
        <div class="m-auto">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" href="#"><img src="../img/footer/ssafy.png" alt="" height="50" /></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><img src="../img/footer/tourapi.png" alt="" height="50" /></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><img src="../img/footer/koreatour.png" alt="" height="50" /></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><img src="../img/footer/culture.png" alt="" height="50" /></a>
            </li>
          </ul>
          <div class="text-center">
            주소 : 212, Teheran-ro, Gangnam-gu, Seoul, Republic of Korea<br />대표번호 : 1588-3357 사업자 번호 :
            123-4567-987
          </div>
        </div>
      </div>
    </nav>
    <!--footer end-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
